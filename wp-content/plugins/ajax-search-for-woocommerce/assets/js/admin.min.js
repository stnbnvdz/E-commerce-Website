!function(s){var e={inputSel:"dgwt-wcas-options-toggle input[type=radio]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(e){var t=s('[name="'+e+'"]').closest("."+this.groupSel),a=s('[name="'+e+'"]:checked').val(),i="";this.hideAll(t),(a=a.replace("_","-")).length>0&&(i="wcas-opt-"+a),s("."+i).length>0&&s("."+i).fadeIn()},hideAll:function(s){s.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var e=this;s("."+e.inputSel).on("change",function(){e.reloadChoices(s(this).attr("name"))})},init:function(){var e=this,t=s("."+e.inputSel+":checked");t.length>0&&(e.registerListeners(),t.each(function(){e.reloadChoices(s(this).attr("name"))}))}},t={inputSel:"dgwt-wcas-options-cb-toggle input[type=checkbox]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(e){var t=e.closest("."+this.groupSel),a=e.is(":checked"),i="";this.hideAll(t);var c=e.attr("name");c=(c=(c=c.replace("dgwt_wcas_settings[","")).replace("]","")).replace(new RegExp("_","g"),"-"),a&&(i="wcas-opt-"+c),i.length>0&&s("."+i).length>0&&s("."+i).fadeIn()},hideAll:function(s){s.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var e=this;s("."+e.inputSel).on("change",function(){e.reloadChoices(s(this))})},init:function(){var e=this,t=s("."+e.inputSel);t.length>0&&(e.registerListeners(),t.each(function(){e.reloadChoices(s(this))}))}},a={actionTriggerClass:"js-ajax-build-index",registerListeners:function(){jQuery(document).on("click","."+this.actionTriggerClass,function(e){e.preventDefault();var t=s(this);t.attr("disabled","disabled"),s(".dgwt-wcas-index-logs").length>0&&s(".dgwt-wcas-index-logs").remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index"},success:function(s){var e='<div class="dgwt-wcas-index-logs">'+s.data.message+"</div>";t.after(e)},complete:function(){t.removeAttr("disabled")}})})},init:function(){this.registerListeners()}},i={actionTriggerClass:"js-dgwt-wcas-bc-wipe-all",switchLeftLabelClass:"js-dgwt-wcas-switch-left",switchRightLabelClass:"js-dgwt-wcas-switch-right",switcherClass:"js-dgwt-wcas-switcher",remindMeLaterClass:"js-dgwt-wcas-bc-remind-me",applyChanges:function(){jQuery(document).on("click","."+this.actionTriggerClass,function(e){e.preventDefault();var t=s(this);t.attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_bc_keep_latest"},success:function(e){void 0!==e.success&&e.success&&(s(".dgwt_wcas_basic-tab").click(),s(".js-dgwt-wcas-bc-notice").fadeOut(400,function(){s(this).remove()}))},complete:function(){t.removeAttr("disabled")}})})},switchAjaxRequest:function(e,t){var a=this,i=s(".dgwt-wcas-bc-switcher"),c=s(".dgwt-wcas-bc-error"),n=s(".dgwt-wcas-bc-success"),d=s(".js-dgwt-wcas-bc-spinner");i.addClass("dgwt-wcas-non-events"),d.removeClass("dgwt-wcas-hidden"),c.addClass("dgwt-wcas-hidden"),n.addClass("dgwt-wcas-hidden"),e="enable"===e?"enable":"disable",jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_bc_toggle",state:e},success:function(s){void 0!==s.success&&s.success?(t(),"disable"===e&&a.flashStepsContainer(),setTimeout(function(){n.removeClass("dgwt-wcas-hidden")},500),setTimeout(function(){n.addClass("dgwt-wcas-hidden")},2e3)):(i.removeClass("dgwt-wcas-non-events"),d.addClass("dgwt-wcas-hidden"),c.removeClass("dgwt-wcas-hidden"))},error:function(){c.removeClass("dgwt-wcas-hidden")},complete:function(){i.removeClass("dgwt-wcas-non-events"),d.addClass("dgwt-wcas-hidden")}})},enableBC:function(){var e=this;e.switchAjaxRequest("enable",function(){s("."+e.switcherClass).attr("checked",!0),s("."+e.switchLeftLabelClass).addClass("dgwt-wcas-toggler--is-active"),s("."+e.switchRightLabelClass).removeClass("dgwt-wcas-toggler--is-active"),s(".dgwt-wcas-toggle").addClass("dgwt-wcas-toggle--mute"),s(".js-dgwt-wcas-todo-old").removeClass("dgwt-wcas-hidden"),s(".js-dgwt-wcas-todo-latest").addClass("dgwt-wcas-hidden")})},disableBC:function(){var e=this;e.switchAjaxRequest("disable",function(){s("."+e.switcherClass).attr("checked",!1),s("."+e.switchRightLabelClass).addClass("dgwt-wcas-toggler--is-active"),s("."+e.switchLeftLabelClass).removeClass("dgwt-wcas-toggler--is-active"),s(".dgwt-wcas-toggle").removeClass("dgwt-wcas-toggle--mute"),s(".js-dgwt-wcas-todo-old").addClass("dgwt-wcas-hidden"),s(".js-dgwt-wcas-todo-latest").removeClass("dgwt-wcas-hidden")})},remindMeLater:function(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_bc_remind_me_later"},success:function(e){void 0!==e.success&&e.success&&s(".js-dgwt-wcas-bc-notice").fadeOut(400,function(){s(this).remove()})}})},flashStepsContainer:function(){var e=s(".dgwt-wcas-bc-todo-wrapp");e.addClass("dgwt-wcas-anim-shake"),setTimeout(function(){e.removeClass("dgwt-wcas-anim-shake")},2e3)},switchListeners:function(){var e=this;s("."+e.switchLeftLabelClass).on("click",function(){e.enableBC()}),s("."+e.switchRightLabelClass).on("click",function(){e.disableBC()}),s("."+e.switcherClass).on("click",function(t){t.preventDefault(),s("."+e.switcherClass).is(":checked")?e.enableBC():e.disableBC()}),s("."+e.remindMeLaterClass).on("click",function(s){s.preventDefault(),e.remindMeLater()})},init:function(){this.applyChanges(),this.switchListeners()}};s(document).ready(function(){var c;e.init(),t.init(),(c=s(".js-dgwt-wcas-sgs-autocolspan")).length>0&&c.find("td").attr("colspan",2),i.init(),a.init()})}(jQuery);